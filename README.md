# Домашнее задание к занятию "`Резервное копирование.`" - `Фомичев Анатолий`

## Ссылка на ДЗ - https://github.com/netology-code/sdb-homeworks/blob/main/12-08.md


### Задание 1

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

Рекомендуемая стратегия: Full backup. Если база большая, а места на сервере хранения нехватает, возможен сценарий использования Full + Differential Backup.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

Рекомендуемая стратегия: Еженедельный или ежесуточный полный бэкап + ежечасные инкрементальные бэкапы.

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

Этот кейс относится не столько к резервному копированию (Backup), сколько к обеспечению высокой доступности (High Availability — HA) и отказоустойчивости.

'	- Репликация в реальном времени - Синхронная или асинхронная репликация изменений на вторичный сервер обеспечивает наличие актуальной копии данных, готовой к переключению в случае сбоя основного сервера;'
'	- Кластеризация баз данных - Группа серверов работает так, что при выходе из строя одного из них другой автоматически берёт на себя его функции;'
'	- Отказоустойчивые системы - системы, спроектированные так, чтобы при сбое одного компонента другой мгновенно заменял его без потери работы;'
'	- Системы распределённых баз данных - данные распределяются между несколькими узлами в разных географических локациях, что обеспечивает географическое распределение рисков и возможность переключения на работающий узел при сбое другого.'

Репликация ≠ бэкап.

### Задание 2

С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore). https://postgrespro.ru/docs/postgresql/18/backup-dump

Примеры # https://postgrespro.ru/docs/postgrespro/18/app-pgdump

Выгрузка базы данных mydb в файл SQL-скрипта:
$ pg_dump mydb > db.sql

Восстановление из ранее полученного скрипта в чистую базу newdb:
$ psql -X -d newdb -f db.sql

Выгрузка базы данных в специальном формате:
$ pg_dump -Fc mydb > db.dump


Примеры # https://postgrespro.ru/docs/postgrespro/18/app-pgrestore

Предположим, что мы выгрузили базу данных mydb в файл специального формата:
$ pg_dump -Fc mydb > db.dump

### Задание 3

В следующем примере используется опция --incremental-base=history:last_backup , с помощью которой mysqlbackup извлекает LSN последней успешной (не TTS) полной или частичной резервной копии из таблицы mysql.backup_history и на основе этого выполняет инкрементное резервное копирование.

mysqlbackup --defaults-file=/home/dbadmin/my.cnf \
  --incremental --incremental-base=history:last_backup \
  --backup-dir=/home/dbadmin/temp_dir \
  --backup-image=incremental_image1.bi \
   backup-to-image


